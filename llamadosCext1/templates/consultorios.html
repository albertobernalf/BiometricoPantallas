{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="ISO-8859-1">
<meta name="viewport"
	content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="description" content="">
<meta name="author" content="">
<title>Pagina Table</title>

<!--
<link rel="stylesheet" href="/css/bootstrap.min.css" />
<script type="text/javascript" src="/js/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="/css/jquery.dataTables.min.css" />
<script type="text/javascript" src="/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="/main.js"></script>
-->
 <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">



<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script> -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">

<script type="text/javascript" src="{% static '/main.js' %}"></script>


</head>

<body>
	<br />


	<div class="row">


		<div class="col-xl-1"></div>

		<div class="col-xl-2" style="background-color: lavender;">

			<figure class="figure">
				<img src="{% static '/IMAGES/logo.jpg' %}" class="figure-img img-fluid rounded"
					alt="...">
				<figcaption class="figure-caption text-right">FUNDACION
					HOSPITAL SAN CARLOS</figcaption>
			</figure>

		</div>

		<div class="col-xl-1"></div>


		<div class="col-xl-6" style="background-color: lavenderblush;">
			<div class="mx-auto" style="width: 1600px;">




				<p class="text-left">
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Mision:</p>


				Brindar una experiencia humanizada e integral en servicio de salud,
				a nuestros pacientes <br /> y sus familias, con altos estandares de
				calidad mediante el mejor talento humano <br /> generando impacto
				social y ambiental ... <br /> <br />


				<p class="text-left">

					<bold>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C O N S U L
					T A &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp E X T E
					R N A &nbsp&nbsp (Sala de Espera)  <bold>
				</p>





			</div>
		</div>

		<div class="col-xl-1"></div>


		<div class="col-xl-2" style="background-color: lavender;"></div>

	</div>

	<div class="col-xl-1"></div>



	<br />
	<br />

	<div class="container">
		<div class="card">


			<div class="myForm">

				<form th:action="@{/save}" method="POST" onsubmit="return valida(this)">

					<div class="modal fade" id="exampleModal" tabindex="-1"
						role="dialog" aria-labelledby="exampleModalLabel"
						aria-hidden="true">
						<div class="modal-dialog" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="exampleModalLabel">Actualiza
										llamada</h5>
									<button type="button" class="close" data-dismiss="modal"
										aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div class="modal-body">

									<div class="form-group">
										
										 <input type="text" class="form-control" id="cita" name="cita" readonly 
											value="">
									</div>
									<div class="form-group">
										<label for="fecha" class="col-form-label">Fecha:</label> <input
											type="text" class="form-control" id="fecha" name="fecha" readonly 
											value="">
									</div>
									<div class="form-group">
										<label for="hora" class="col-form-label">Hora:</label> <input
											type="text" class="form-control" id="hora" name="hora" readonly 
											value="">
									</div>
									<div class="form-group">
										<label for="consultorio" class="col-form-label">Consultorio:</label>
										<input type="text" class="form-control" id="consultorio"
											name="consultorio"  readonly  value="">
									</div>
														
												<div class="form-group">
										<label for="paciente" class="col-form-label">Paciente:</label>
										<input type="text" class="form-control" id="paciente"
											name="paciente" readonly   value="">
									</div>

								

									<div class="form-group">
										<label for="llamada" class="col-form-label">Llamada:</label> <input
											type="checkbox" class="checkbox" id="llamada" name="llamada"  th:name="llamada" 
											>
									</div>

									<div class="form-group">
										<label for="atendido" class="col-form-label">Atendido:</label>
										<input type="checkbox" class="checkbox" id="atendido"
											name="atendido"  >
									</div>			
														
											<div class="form-group">
										
										<input type="text" class="form-control" id="estado_Cita"
											name="estado_Cita"  style="visibility:hidden;" value="">
									</div>				
																	
										<input type="text" class="form-control" id="especialidad" name="especialidad" style="visibility:hidden;"  value="">
												
										 <input type="text" class="form-control" id="medico" name="medico" style="visibility:hidden;" 											value="">
									

								


								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary"
										data-dismiss="modal">Close</button>
									<input type="submit" class="btn btn-primary" value="save">
								</div>
							</div>
						</div>
				</form>
			</div>


		</div>


		<div class="card-block">

			<table class="table table-hover">

				<tr>
				<!--	<th th:text = "#{cita}"></th> -->
					<th>Cita</th>
					<th>Fecha</th>
					<th>Hora</th>
					<th>Consultorio</th>
					<th>Especialidad</th>
					<th>Medico</th>
				<!--	<th th:text = "#{paciente}"></th> -->
					<th>Paciente</th>
					<th>Estado_Cita</th>
					<th>llamada</th>
					<th>atendido</th>
				<!--	<th>Editar</th>  -->

				</tr>

				<tbody>

				 {% for vistaCex in VistaCex %}

				 	{% with var1=vistaCex.llamada  	%}
					{% ifequal var1 0    %}
						<tr>
       		    	{% endifequal %}
					{% ifequal var1 1    %}
							<tr>
					<!--	<td style="background-color:#F9F8DC">  </td>  -->
      		     	{% endifequal %}
					{% endwith %}

   	 				<td>{{ vistaCex.cita }}</td>
 					<td>{{ vistaCex.fecha }}</td>
 					<td>{{ vistaCex.hora  }}</td>
					<td>{{ vistaCex.consultorio  }}</td>
  					<td>{{ vistaCex.especialidad  }}</td>
					<td>{{ vistaCex.medico  }}</td>
 					<td>{{ vistaCex.paciente }}</td>
					<td>{{ vistaCex.estado_cita }}</td>


 				{% with var1=vistaCex.llamada  	%}
					{% ifequal var1 0    %}
						<td></td>
       		    	{% endifequal %}
					{% ifequal var1 1    %}
						<td>   <img src="{% static '/IMAGES/PuntoVerde.jpg' %}" width="42" height="42" style="vertical-align:bottom">             </td>

      		     	{% endifequal %}
					{% endwith %}


					 <td>{{ vistaCex.atendido }}</td>
					 <td><a href="@{findOne/(cita=${vistaCex.cita})}"
							class="btn btn-primary eBtn"> </a>Editar</td>

				 </tr>


				 {% endfor %}

				</tbody>

			</table>

			</hr>
			<ul class="nav nav-pills">
				<li class="nav-item"
					th:each="i : ${#numbers.sequence(0,vistaCex.totalPages - 1)}">
					<a th:href="@{/buscaConsultorio(page=${i})}" th:text="${i}" class="nav-link"
					th:classappend="${currentPage}==${i}?'active':''"> </a>
				</li>

			</ul>


		</div>


	</div>


	</div>
	
<br>
<br>

<div align="center">
	<td><a href="/Ingreso/" 	class="btn btn-secondary"> </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; REGRESAR</td>
</div>

							

<script>
$(document).ready(function()
		{

	console.log("Entre AlBERTO BERNAL F Cargue la Forma Modal")
	print ("Entre AlBERTO BERNAL F Cargue la Forma Modal")

	  $('.table .eBtn').on('click',function(event)
	        {
			event.preventDefault();
			var href = $(this).attr('href');

			$.get(href, function(vistaCex,status)
					{
				$('.myForm #cita').val(vistaCex.cita);
				$('.myForm #fecha').val(vistaCex.fecha);
				$('.myForm #hora').val(vistaCex.hora);
				$('.myForm #consultorio').val(vistaCex.consultorio);
				$('.myForm #especialidad').val(vistaCex.especialidad);
				$('.myForm #medico').val(vistaCex.medico);
				$('.myForm #paciente').val(vistaCex.paciente);
				$('.myForm #estado_Cita').val(vistaCex.estado_Cita);

				if (vistaCex.llamada == true)

					{

					$('.myForm #llamada').prop('checked',true);
						}
				else
					{

					$('.myForm #llamada').prop('checked',false);
					}


				if (vistaCex.atendido == true)

				{

				$('.myForm #atendido').prop('checked',true);
					}
			else
				{

				$('.myForm #atendido').prop('checked',false);
				}


					}

			)


		  	$('.myForm #exampleModal').modal();

			  });

		}

)
</script>
<script>
function valida(forma)
{

	if (x == false)
	 {
		 document.getElementById("llamada").checked = false;
	 }
		
	if (y == false)
	 {
		document.getElementById("atendido").checked = false;
	 }

	};

</script>

</body>
</html>